@using Codesanook.EventManagement.ViewModels
@using Codesanook.EventManagement.Controllers
@model EventBookingViewModel
@{
    string GetDateComponents(DateTime beginDate, DateTime endDate)
    {
        const string dateFormat = "d MMM yyyy";
        // 1 May 2020
        if (beginDate.Date == endDate.Date)
        {
            return beginDate.ToString(dateFormat);
        }

        // 1 - 10 May 2020
        if ((beginDate.Month == endDate.Month) && (beginDate.Year == endDate.Year))
        {
            return beginDate.Day.ToString() + " - " + endDate.ToString(dateFormat);
        }

        // 1 May - 10 June 2020
        if (beginDate.Year == endDate.Year)
        {
            return beginDate.ToString("d MMM") + " - " + endDate.ToString(dateFormat);
        }

        // 1 May 2020 - 1 May 2021
        return beginDate.ToString(dateFormat) + " - " + endDate.ToString(dateFormat);
    }
}
<h1 class="text-center">@Html.TitleForPage(T("Review an event's registeration").ToString())</h1>
<div class="row">
    <div class="col-12 offset-md-3 col-md-6">
        <h4>Event: @Model.Event.Title</h4>
        <p>
            @if (Model.Event.BeginDateTimeUtc.HasValue && Model.Event.EndDateTimeUtc.HasValue)
            {
                <i class="fa fa-calendar" aria-hidden="true"></i>
                @GetDateComponents(Model.Event.BeginDateTimeUtc.Value, Model.Event.EndDateTimeUtc.Value)
            }
        </p>
        <p>
            <i class="fa fa-clock-o" aria-hidden="true"></i>
            <span>@(Model.Event.BeginDateTimeUtc.HasValue ? Model.Event.BeginDateTimeUtc.Value.ToString("HH:mm") : "")</span>
            <span>-</span>
            <span>@(Model.Event.EndDateTimeUtc.HasValue ? Model.Event.EndDateTimeUtc.Value.ToString("HH:mm") : "")</span>
            <span>(GMT+7)</span>
        </p>
        <p><i class="fa fa-map-pin main-color mr-2"></i> @Model.Event.Location</p>
        <h6 class="mt-4">
            <strong>Please revise your information.</strong>
        </h6>
        @if (Model != null)
        {
            foreach (var attendee in Model.EventAttendees)
            {
                <div class="row mt-3">
                    <div class="col-3">First Name:</div>
                    <div class="col-9">@attendee.FirstName</div>
                </div>
                <div class="row mt-3">
                    <div class="col-3">Last Name:</div>
                    <div class="col-9">@attendee.LastName</div>
                </div>
                <div class="row mt-3">
                    <div class="col-3">Email:</div>
                    <div class="col-9">@attendee.Email</div>
                </div>
                <div class="row mt-3">
                    <div class="col-3">Mobile phone number:</div>
                    <div class="col-9">@attendee.MobilePhoneNumber</div>
                </div>
                <div class="row mt-3">
                    <div class="col-3">Organization:</div>
                    <div class="col-9">@attendee.OrganizationName</div>
                </div>
                <hr />
            }
        }
        <div class="row mt-4">
            <div class="col">
                <button class="btn btn-secondary" onclick="window.history.back()">
                    <i class="fa fa-arrow-left"></i> Back to edit
                </button>
            </div>
            <div class="col text-right">


                @using (Html.BeginFormAntiForgeryPost(
                    Url.Action(
                        nameof(EventBookingController.RegisterConfirm),
                        new { id = Model.Id }
                    )
                ))
                {
                    <button class="btn btn-secondary" type="submit">
                        Cofirm
                    </button>
                }
            </div>
        </div>
    </div>
</div>
